type StringView {
	str value;
	int length;
}

var SYS_brk = 12;

var start = syscall(SYS_brk, 0, 0, 0, 0, 0, 0);
syscall(SYS_brk, (int)start + 16, 0, 0, 0, 0, 0); // allocate 16 bytes

var string = (StringView)start;
string.value = "Hello, World!\n";
string.length = 14;

var SYS_write = 1;
var STDOUT = 1;
syscall(SYS_write, STDOUT, string.value, string.length, 0, 0, 0);

string.value[5] = '.';
string.length = 2 + 6 * 2;
syscall(SYS_write, STDOUT, string.value, string.length, 0, 0, 0);

func strlen(str string) -> int {
	var i = 0;
	while (string[i] != '\0') {
		i = i + 1;
	}
	return i;
}

string.length = strlen(string.value);
syscall(SYS_write, STDOUT, string.value, string.length, 0, 0, 0);
